CREATE OR REPLACE VIEW VW_SC_DEPT_ITEM_DISP_ASIS_FABRIC AS 
 SELECT distinct v_dept_item.category_planning_id,
    v_dept_item.product_codes,
    v_dept_item.production_type,
    v_dept_item.sc_planning_main_item_id,
    v_dept_item.plan_item_code,
    v_dept_item.transaction_id,
    v_dept_item.total_quantity,
    v_dept_item.raw_material_min_date,
    v_dept_item.raw_material_max_date,
    v_dept_item.style_item_code,
    v_dept_item.category_name,
    v_dept_item.style_item_name,
    v_dept_item.style_code,
    v_dept_item.color_code,
    v_dept_item.color,
    v_dept_item.style_item_quantity,
    v_dept_item.style_item_std_unit,
    v_dept_item.style_total_cost,
    v_fabric_details.style_ccode_id,
    v_fabric_details.item_code,
    v_fabric_details.item_name,
    v_fabric_details.quantity,
    v_fabric_details.item_std_unit,
    v_fabric_details.fabric_code,
    v_fabric_details.fabric_name,
    v_fabric_details.fabric_type,
    v_fabric_details.fabric_std_unit,
    v_fabric_details.unit_std_width,
    v_fabric_details.length_metre,
    v_fabric_details.width_inch,
    v_fabric_details.shrinkage_metre,
    v_fabric_details.pcs,
    round(v_fabric_details.total_measurement::numeric,2)::float AS total_measurement,
    sc_asis_fabric.sc_asis_plan_fabric_item_id,
    sc_asis_fabric.transaction_id AS fab_trans_id,
    sc_asis_fabric.fabric_total_length_metre AS asis_fabric_total_length_metre,
    sc_asis_fabric.fabric_total_width_inch AS asis_fabric_total_width_inch,
    sc_asis_fabric.fabric_total_shrinkage_metre AS asis_fabric_total_shrinkage_metre,
    sc_asis_fabric.fabric_total_pcs AS asis_fabric_total_pcs,
    round(sc_asis_fabric.fabric_total_measurement::numeric,2)::float AS asis_fabric_total_measurement,
    sc_asis_fabric.fabric_issue_min_date,
    sc_asis_fabric.fabric_issue_max_date,
    sc_asis_fabric.fabric_delivery_min_date,
    sc_asis_fabric.fabric_delivery_max_date,
    sc_asis_fabric.custom,
    sc_asis_fabric.dept_changed,
    sc_asis_fabric.sent_for_approval,
    v_dept_item.item_approved
   FROM vw_sc_dept_item_disp v_dept_item
     JOIN sc_category_planning_items_asis_fabric sc_asis_fabric ON v_dept_item.sc_planning_main_item_id = sc_asis_fabric.sc_planning_main_item_id
     LEFT JOIN vw_style_ccode_item_fabric_details v_fabric_details ON v_fabric_details.item_code::text = v_dept_item.plan_item_code::text;
