CREATE OR REPLACE FUNCTION FUNC_TRACKER_DESIGNER_NOT_ACCEPTED_ORDER_EMBROIDERY(
    IN v_order_id integer,
    IN v_embrd_custom_order_id integer,
    IN v_not_accepted character,
    IN v_reason text,
    OUT output_msg text,
    OUT id integer)
  RETURNS record AS
$BODY$
BEGIN  
                 
		IF    v_not_accepted='RJ' THEN                   
			UPDATE tracker_custom_received_orders_embroidery
			SET 
			designer_rejected='Y', 
			designer_not_accepted_date=current_timestamp, 
			designer_not_accepted_reason=v_reason
			WHERE embrd_custom_order_id =v_embrd_custom_order_id;
		output_msg:='Successfully';
		ELSIF v_not_accepted='RT' THEN
			UPDATE tracker_custom_received_orders_embroidery 
			SET 
			designer_returned='Y', 
			designer_not_accepted_date=current_timestamp, 
			designer_not_accepted_reason=v_reason
			WHERE embrd_custom_order_id =v_embrd_custom_order_id;	
		output_msg:='Successfully';
		END IF;
	
 
 
               
END
$BODY$
  LANGUAGE plpgsql;
